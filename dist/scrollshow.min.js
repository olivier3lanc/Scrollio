!function(e){e.fn.scrollshow=function(t){var n={id:"scrollshow",scrollRange:2e3,keepActive:!1,textEllipsis:"...",intro:!0,onItemChange:function(e){},onFirstItem:function(e){},onLastItem:function(e){}};if("object"==typeof t){Object.getOwnPropertyNames(t).forEach(function(e){n.hasOwnProperty(e)&&(n[e]=t[e])})}var a=e("body"),i=e(window).height(),s=e("#"+n.id);s.append('<div class="overlay"></div>'),n.intro&&s.append('<div class="intro active"><h1>'+document.title+'</h1><p class="description">'+e('head meta[name="description"]').attr("content")+"</p></div>");var r=0,o=0,l=s.children(".item").length,c=n.scrollRange;a.height(l*c+i),s.append('<nav class="navigation"></nav>');for(var d=s.children(".navigation"),p=0;p<l;p++)d.append('<a href="#'+p.toString()+'"></a>'),0==p&&d.append('<span class="progress"></span>');var h=d.children("a:first-child"),f=(h.outerWidth(),h.outerHeight()),v=parseFloat(h.css("margin-bottom")),g=l*(f+v);d.find("a").on("click",function(t){t.preventDefault();var n=e(this).attr("href").replace("#",""),a=(n=parseInt(n))*c;e(document).scrollTop(a)}),s.children(".item").each(function(){for(var t=e(this).children().eq(0),a=t.text()+" "+n.textEllipsis,i="",s=1e3,r=0;r<a.length;r++)i+=" "==a[r]?'</span><span class="separator">'+a[r]+'</span><span class="word">':'<span class="letter" style="z-index:'+s+';">'+a[r]+"</span>",s--;t.html('<span class="word">'+i+"</span>")});setTimeout(function(){e(window).scrollTop()},100),e(document).on("scroll",function(t){!function(){(o=e(window).scrollTop())>=l*c&&(o=l*c-1),r=parseInt(o/c);var t=o-c*r,a=s.children(".item:eq("+r+")"),i=s.children(".item:not(:eq("+r+"))"),p=s.find(".item:eq("+r+") .letter").length,h=parseInt(c/p),m=parseInt(t/h);a.hasClass("active")||(e.Event("itemChange"),e.Event("lastItem"),e.Event("firstItem"),s.trigger({type:"itemChange",targetIndex:r}),0==r&&s.trigger({type:"firstItem"}),r==l-1&&s.trigger({type:"lastItem"}));if(a.addClass("active"),a.find(".letter:eq("+m+")").addClass("active last"),n.keepActive){for(u=0;u<m;u++)a.find(".letter:eq("+u+")").addClass("active").removeClass("last");for(var u=m+1;u<p;u++)a.find(".letter:eq("+u+")").removeClass("active last")}else a.find(".letter:not(:eq("+m+"))").removeClass("active last");i.removeClass("active");for(var I=0;I<l;I++)I<=r?d.find('a[href="#'+I.toString()+'"]').addClass("active"):d.find('a[href="#'+I.toString()+'"]').removeClass("active");var w=o/(l*c)*g;r+1==l&&(w=g-v-f),d.children(".progress").height(w)}()}),e(window).on("resize",function(t){i=e(window).height(),a.height(l*c+i)}),s.on("itemChange",function(e){var t=e.targetIndex;n.onItemChange(t)}),s.on("firstItem",function(){n.onFirstItem(console.log("first"))}),s.on("lastItem",function(){n.onLastItem(console.log("last"))})}}(jQuery);