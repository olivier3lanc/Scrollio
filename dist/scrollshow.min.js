!function(e){e.fn.scrollshow=function(t){var n={id:"scrollshow",scrollRange:1e3,keepActive:!0,textEllipsis:"...",intro:!0,onItemChange:function(e){},onFirstItem:function(e){},onLastItem:function(e){}};if("object"==typeof t){Object.getOwnPropertyNames(t).forEach(function(e){n.hasOwnProperty(e)&&(n[e]=t[e])})}var a=e("body"),r=e(window).height(),i=e("#"+n.id);i.append('<div class="overlay"></div>'),n.intro&&i.append('<div class="intro active"><header><h1>'+document.title+'</h1><p class="description">'+e('head meta[name="description"]').attr("content")+"</p><p>Scroll down</p></header></div>");var s=0,o=0,l=i.children(".item").length,c=n.scrollRange;a.height(l*c+r),i.append('<nav class="navigation"></nav>');for(var d=i.children(".navigation"),h=0;h<l;h++)d.append('<a href="#'+h.toString()+'"></a>'),0==h&&d.append('<span class="progress"></span>');var p=d.children("a:first-child"),v=(p.outerWidth(),p.outerHeight()),f=parseFloat(p.css("margin-bottom")),g=l*(v+f);d.find("a").on("click",function(t){t.preventDefault();var n=e(this).attr("href").replace("#",""),a=(n=parseInt(n))*c;e(document).scrollTop(a)}),i.children(".item").each(function(){for(var t=e(this).children().eq(0),a=t.text()+" "+n.textEllipsis,r="",i=1e3,s=0;s<a.length;s++)r+=" "==a[s]?'</span><span class="separator">'+a[s]+'</span><span class="word">':'<span class="letter" style="z-index:'+i+';">'+a[s]+"</span>",i--;t.html('<span class="word">'+r+"</span>")});e(document).on("scroll",function(t){!function(){(o=e(window).scrollTop())>=l*c&&(o=l*c-1),s=parseInt(o/c);var t=o-c*s,a=i.children(".item:eq("+s+")"),r=i.children(".item:not(:eq("+s+"))"),h=i.find(".item:eq("+s+") .letter").length,p=parseInt(c/h),m=parseInt(t/p);a.hasClass("active")||(e.Event("itemChange"),e.Event("lastItem"),e.Event("firstItem"),i.trigger({type:"itemChange",targetIndex:s}),0==s&&i.trigger({type:"firstItem"}),s==l-1&&i.trigger({type:"lastItem"}));if(a.addClass("active"),a.find(".letter:eq("+m+")").addClass("active current"),n.keepActive){for(u=0;u<m;u++)a.find(".letter:eq("+u+")").addClass("active").removeClass("current");for(var u=m+1;u<h;u++)a.find(".letter:eq("+u+")").removeClass("active current")}else a.find(".letter:not(:eq("+m+"))").removeClass("active current");r.removeClass("active");for(var I=0;I<l;I++)I<=s?d.find('a[href="#'+I.toString()+'"]').addClass("active"):d.find('a[href="#'+I.toString()+'"]').removeClass("active");var C=o/(l*c)*g;s+1==l&&(C=g-f-v),d.children(".progress").height(C)}(),n.intro&&o>0&&i.children(".intro").removeClass("active")}),e(window).on("resize",function(t){r=e(window).height(),a.height(l*c+r)}),i.on("itemChange",function(e){var t=e.targetIndex;n.onItemChange(t)}),i.on("firstItem",function(){n.onFirstItem(console.log("first"))}),i.on("lastItem",function(){n.onLastItem(console.log("last"))})}}(jQuery);