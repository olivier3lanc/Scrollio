!function(e){e.fn.scrollshow=function(t){var n={id:"scrollshow",scrollRange:2e3,keepActive:!0,textEllipsis:"...",intro:!0,navigation:!1,progressBar:!0,overlay:!0,onItemChange:function(e){},onFirstItem:function(e){},onLastItem:function(e){},onScrollEnd:function(e){}};if("object"==typeof t){Object.getOwnPropertyNames(t).forEach(function(e){n.hasOwnProperty(e)&&(n[e]=t[e])})}var r=e("body"),i=window.innerWidth,a=window.innerHeight,s=e("#"+n.id);n.overlay&&s.append('<div class="overlay"></div>');var o=0,l=0,c=s.children(".item").length,d=n.scrollRange;if(r.height(c*d+a),n.navigation){s.append('<nav class="navigation"></nav>');for(var v=s.children(".navigation"),p=0;p<c;p++)v.append('<a href="#'+p.toString()+'"></a>'),0==p&&v.append('<span class="progress"></span>');var f=v.children("a:first-child"),h=(f.outerWidth(),f.outerHeight()),g=parseFloat(f.css("margin-bottom")),m=c*(h+g);v.find("a").on("click",function(t){t.preventDefault();var n=e(this).attr("href").replace("#",""),r=(n=parseInt(n))*d;e(document).scrollTop(r)})}var u=function(t){"string"==typeof t&&s.find(t).each(function(){var t=e(this).children().eq(0),r=t.text()+" "+n.textEllipsis,i="",a=1e3;i+='<span class="word">';for(var s=0;s<r.length;s++)" "==r[s]?(i+="</span>",i+='<span class="separator">'+r[s]+"</span>",i+='<span class="word">'):i+='<span class="letter" style="z-index:'+a+';">'+r[s]+"</span>",a--;i+="</span>",t.html(i)})};u(".item");var w=function(){if((l=e(window).scrollTop())>=c*d){l=c*d-1;e.Event("scrollEnd");s.trigger({type:"scrollEnd"})}o=parseInt(l/d);var t=l-d*o,r=s.children(".item:eq("+o+")"),a=s.children(".item:not(:eq("+o+"))"),p=s.find(".item:eq("+o+") .letter").length,f=parseInt(d/p),u=parseInt(t/f);if(!r.hasClass("active")){e.Event("itemChange"),e.Event("lastItem"),e.Event("firstItem");s.trigger({type:"itemChange",targetIndex:o}),0==o&&s.trigger({type:"firstItem"}),o==c-1&&s.trigger({type:"lastItem"})}if(r.addClass("active"),r.find(".letter:eq("+u+")").addClass("active current"),n.keepActive){for(w=0;w<u;w++)r.find(".letter:eq("+w+")").addClass("active").removeClass("current");for(var w=u+1;w<p;w++)r.find(".letter:eq("+w+")").removeClass("active current")}else r.find(".letter:not(:eq("+u+"))").removeClass("active current");if(a.removeClass("active"),n.navigation){for(var I=0;I<c;I++)I<=o?v.find('a[href="#'+I.toString()+'"]').addClass("active"):v.find('a[href="#'+I.toString()+'"]').removeClass("active");var C=l/(c*d)*m;o+1==c&&(C=m-g-h),v.children(".progress").height(C)}if(n.intro&&l>0&&s.children(".intro").removeClass("active"),n.progressBar){var y=l/(c*d)*i;s.children(".progress-bar").css("width",y)}};n.intro?(s.append('<div class="intro"><header><h1>'+document.title+'</h1><p class="description">'+e('head meta[name="description"]').attr("content")+"</p></header></div>"),u(".intro header"),setTimeout(function(){s.children(".intro").addClass("active")},1)):w(),n.progressBar&&s.append('<div class="progress-bar"></div>'),e(document).on("scroll",function(e){w()}),e(window).on("resize",function(e){i=window.innerWidth,a=window.innerHeight,r.height(c*d+window.innerHeight)}),s.on("itemChange",function(e){var t=e.targetIndex;n.onItemChange(t)}),s.on("firstItem",function(e){n.onFirstItem(e)}),s.on("lastItem",function(e){n.onLastItem(e)}),s.on("scrollEnd",function(e){n.onScrollEnd(e)})}}(jQuery);