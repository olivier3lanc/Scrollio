!function(e){e.fn.scrollshow=function(t){var n={id:"scrollshow",scrollRange:2e3,keepActive:!0,textEllipsis:"...",intro:!0,navigation:!1,progressBar:!0,overlay:!0,clickToGoNext:!0,onItemChange:function(e){},onItemEnd:function(e){},onFirstItem:function(e){},onLastItem:function(e){},onScrollEnd:function(e){}};if("object"==typeof t){Object.getOwnPropertyNames(t).forEach(function(e){n.hasOwnProperty(e)&&(n[e]=t[e])})}var i=e("body"),r=window.innerWidth,a=window.innerHeight,o=e("#"+n.id);n.overlay&&o.append('<div class="overlay"></div>');var s=0,c=0,l=0,d=o.children(".item").length,v=n.scrollRange,p=0,f=0;i.height(d*v+a);var h=-1;if(n.navigation){o.append('<nav class="navigation"></nav>');for(var g=o.children(".navigation"),m=0;m<d;m++)g.append('<a href="#'+m.toString()+'"></a>'),0==m&&g.append('<span class="progress"></span>');var u=g.children("a:first-child"),w=(u.outerWidth(),u.outerHeight()),I=parseFloat(u.css("margin-bottom")),C=d*(w+I);g.find("a").on("click",function(t){t.preventDefault();var n=e(this).attr("href").replace("#",""),i=(n=parseInt(n))*v;e(document).scrollTop(i)})}var E=function(t){"string"==typeof t&&o.find(t).each(function(){var t=e(this).children().eq(0),i=t.text()+" "+n.textEllipsis,r="",a=1e3;r+='<span class="word">';for(var o=0;o<i.length;o++)" "==i[o]?(r+="</span>",r+='<span class="separator">'+i[o]+"</span>",r+='<span class="word">'):r+='<span class="letter" style="z-index:'+a+';">'+i[o]+"</span>",a--;r+="</span>",t.html(r)})};E(".item");n.intro&&(o.append('<div class="intro"><header><h1>'+document.title+'</h1><p class="description">'+e('head meta[name="description"]').attr("content")+"</p></header></div>"),E(".intro header"),setTimeout(function(){-1==h&&o.children(".intro").addClass("active")},16)),n.progressBar&&o.append('<div class="progress-bar"></div>'),n.clickToGoNext&&o.append('<div class="click-to-go-next"><p><a href="#next"><span>next</span></a></p></div>'),e(document).on("scroll",function(t){var a=e(window).scrollTop(),m=a-p;p=a,f=m,Math.abs(m)>500&&(i.css("overflow","hidden"),alert("you are scrolling too fast, scroll slower"),i.css("overflow","auto")),function(){(c=e(window).scrollTop())>=d*v&&(c=d*v-1,e.Event("scrollEnd"),o.trigger({type:"scrollEnd"}));s=parseInt(c/v),l=c-v*s;var t=o.children(".item:eq("+s+")"),i=o.children(".item:not(:eq("+s+"))"),a=o.find(".item:eq("+s+") .letter").length,p=parseInt(v/a),f=parseInt(l/p);if(f!=h){if(h=f,t.hasClass("active")||(e.Event("itemChange"),e.Event("lastItem"),e.Event("firstItem"),o.trigger({type:"itemChange",targetIndex:s}),0==s&&o.trigger({type:"firstItem"}),s==d-1&&o.trigger({type:"lastItem"})),t.addClass("active"),t.find(".letter:eq("+f+")").addClass("active current"),n.keepActive){for(m=0;m<f;m++)t.find(".letter:eq("+m+")").addClass("active").removeClass("current");for(var m=f+1;m<a;m++)t.find(".letter:eq("+m+")").removeClass("active current")}else t.find(".letter:not(:eq("+f+"))").removeClass("active current");if(i.removeClass("active"),n.navigation){for(var u=0;u<d;u++)u<=s?g.find('a[href="#'+u.toString()+'"]').addClass("active"):g.find('a[href="#'+u.toString()+'"]').removeClass("active");var E=c/(d*v)*C;s+1==d&&(E=C-I-w),g.children(".progress").height(E)}if(n.intro&&c>0&&o.children(".intro").removeClass("active"),n.progressBar){var y=c/(d*v)*r;o.children(".progress-bar").css("width",y)}h=f}f==a-1&&(e.Event("itemEnd"),o.trigger({type:"itemEnd",index:s}))}()}),e(window).on("resize",function(e){r=window.innerWidth,a=window.innerHeight,i.height(d*v+window.innerHeight)}),o.on("itemChange",function(e){var t=e.targetIndex;n.onItemChange(t)}),o.on("firstItem",function(e){n.onFirstItem(e)}),o.on("lastItem",function(e){n.onLastItem(e)}),o.on("itemEnd",function(t){var r=t.index;if(n.onItemEnd(r),n.clickToGoNext&&f>0&&r!=d-1){var a=r+1;i.css("overflow","hidden"),e(".click-to-go-next").addClass("active").one("click",function(){i.css("overflow","auto");var t=a*v;e(window).scrollTop(t),e(this).removeClass("active")})}}),o.on("scrollEnd",function(e){n.onScrollEnd(e)})}}(jQuery);