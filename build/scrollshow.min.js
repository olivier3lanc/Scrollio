!function(e){e.fn.scrollshow=function(t){var n={id:"scrollshow",scrollRange:2e3,keepActive:!0,textEllipsis:"...",intro:!1,navigation:!1,progressBar:!0,overlay:!0,onItemChange:function(e){},onLetterChange:function(e){},onScroll:function(e){},onItemEnd:function(e){},onFirstItem:function(e){},onLastItem:function(e){},onScrollEnd:function(e){}};if("object"==typeof t){Object.getOwnPropertyNames(t).forEach(function(e){n.hasOwnProperty(e)&&(n[e]=t[e])})}var r=e("body"),i=window.innerWidth,a=window.innerHeight,o=e("#"+n.id);n.overlay&&o.append('<div class="overlay"></div>');var s=0,l=0,c=0,d=o.children(".item").length,v=n.scrollRange,h=0,p=0;r.height(d*v+a);var f=-1,g=!0,m=e('head meta[name="description"]').attr("content"),u=document.title;if(n.navigation){o.append('<nav class="navigation"></nav>');for(var w=o.children(".navigation"),C=0;C<d;C++)w.append('<a href="#'+C.toString()+'"></a>'),0==C&&w.append('<span class="progress"></span>');var E=w.children("a:first-child"),I=(E.outerWidth(),E.outerHeight()),y=parseFloat(E.css("margin-bottom")),q=d*(I+y);w.find("a").on("click",function(t){t.preventDefault();var n=e(this).attr("href").replace("#",""),r=(n=parseInt(n))*v;e(document).scrollTop(r)})}var x=function(t){"string"==typeof t&&o.find(t).each(function(){var t=e(this).children().eq(0),r=t.text()+" "+n.textEllipsis,i="",a=1e3;i+='<span class="word">';for(var o=0;o<r.length;o++)" "==r[o]?(i+="</span>",i+='<span class="separator">'+r[o]+"</span>",i+='<span class="word">'):i+='<span class="letter" style="z-index:'+a+';">'+r[o]+"</span>",a--;i+="</span>",t.html(i)})};x(".item");n.intro?(void 0===m&&(m="Scroll down to discover"),void 0!==u&&""==u&&u==n.textEllipsis||(u="Scrollshow"),o.append('<div class="intro"><header><h1>'+u+'</h1><p class="description">'+m+"</p></header></div>"),x(".intro header"),setTimeout(function(){-1==f&&o.children(".intro").addClass("active")},16)):o.children(".item").eq(0).addClass("active"),n.progressBar&&o.append('<div class="progress-bar"></div>'),e(document).on("scroll",function(t){var r=e(window).scrollTop(),a=!0,g=r-h;g<0&&(a=!1),h=r,p=g,n.onScroll(a),Math.abs(g)>500&&alert("you are scrolling too fast, scroll slower"),function(){(l=e(window).scrollTop())>=d*v&&(l=d*v-1,e.Event("scrollEnd"),o.trigger({type:"scrollEnd"}));s=parseInt(l/v),c=l-v*s;var t=o.children(".item:eq("+s+")"),r=o.children(".item:not(:eq("+s+"))"),a=o.find(".item:eq("+s+") .letter").length,h=parseInt(v/a),p=parseInt(c/h);if(p!=f){if(f=p,t.hasClass("active")||(e.Event("itemChange"),e.Event("lastItem"),e.Event("firstItem"),o.trigger({type:"itemChange",targetIndex:s}),0==s&&o.trigger({type:"firstItem"}),s==d-1&&o.trigger({type:"lastItem"})),t.addClass("active"),e.Event("letterChange"),o.trigger({type:"letterChange"}),t.find(".letter:eq("+p+")").addClass("active current"),n.keepActive){for(g=0;g<p;g++)t.find(".letter:eq("+g+")").addClass("active").removeClass("current");for(var g=p+1;g<a;g++)t.find(".letter:eq("+g+")").removeClass("active current")}else t.find(".letter:not(:eq("+p+"))").removeClass("active current");if(r.removeClass("active"),n.navigation){for(var m=0;m<d;m++)m<=s?w.find('a[href="#'+m.toString()+'"]').addClass("active"):w.find('a[href="#'+m.toString()+'"]').removeClass("active");var u=l/(d*v)*q;s+1==d&&(u=q-y-I),w.children(".progress").height(u)}if(n.intro&&l>0&&o.children(".intro").removeClass("active"),n.progressBar){var C=l/(d*v)*i;o.children(".progress-bar").css("width",C)}f=p}p==a-1&&(e.Event("itemEnd"),o.trigger({type:"itemEnd",index:s}))}()}),e(window).on("resize",function(e){i=window.innerWidth,a=window.innerHeight,r.height(d*v+window.innerHeight)}),o.on("itemChange",function(e){var t=e.targetIndex;n.onItemChange(t),g=!0}),o.on("firstItem",function(e){n.onFirstItem(e)}),o.on("lastItem",function(e){n.onLastItem(e)}),o.on("letterChange",function(e){n.onLetterChange(e)}),o.on("itemEnd",function(e){if(g){var t=e.index;n.onItemEnd(t);o.children(".item").eq(t);g=!1}}),o.on("scrollEnd",function(e){n.onScrollEnd(e)})}}(jQuery);