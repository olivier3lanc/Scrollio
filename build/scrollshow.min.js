!function(e){e.fn.scrollshow=function(t){var n={id:"scrollshow",scrollRange:2e3,keepActive:!0,textEllipsis:"...",intro:!1,progressBar:!0,overlay:!0,onItemChange:function(e){},onLetterChange:function(e){},onScroll:function(e){},onItemEnd:function(e){},onFirstItem:function(e){},onLastItem:function(e){},onScrollEnd:function(e){}};if("object"==typeof t){Object.getOwnPropertyNames(t).forEach(function(e){n.hasOwnProperty(e)&&(n[e]=t[e])})}var i=e("body"),r=window.innerWidth,o=window.innerHeight,a=e("#"+n.id);n.overlay&&a.append('<div class="overlay"></div>');var s=0,l=0,c=0,d=a.children(".item").length,g=n.scrollRange,v=0,h=0;i.height(d*g+o);var f=-1,p=!0,m=e('head meta[name="description"]').attr("content"),u=document.title,w=function(t){"string"==typeof t&&a.find(t).each(function(){var t=e(this).children().eq(0),i=t.text()+" "+n.textEllipsis,r="",o=1e3;r+='<span class="word">';for(var a=0;a<i.length;a++)" "==i[a]?(r+="</span>",r+='<span class="separator">'+i[a]+"</span>",r+='<span class="word">'):r+='<span class="letter" style="z-index:'+o+';">'+i[a]+"</span>",o--;r+="</span>",t.html(r)})};w(".item");n.intro?(void 0===m&&(m="Scroll down to discover"),void 0!==u&&""==u&&u==n.textEllipsis||(u="Scrollshow"),a.append('<div class="intro"><header><h1>'+u+'</h1><p class="description">'+m+"</p></header></div>"),w(".intro header"),setTimeout(function(){-1==f&&a.children(".intro").addClass("active")},16)):a.children(".item").eq(0).addClass("active"),n.progressBar&&a.append('<div class="progress-bar"></div>'),e(document).on("scroll",function(t){var i=e(window).scrollTop(),o=!0,p=i-v;p<0&&(o=!1),v=i,h=p,n.onScroll(o),Math.abs(p),function(){(l=e(window).scrollTop())>=d*g&&(l=d*g-1,e.Event("scrollEnd"),a.trigger({type:"scrollEnd"}));s=parseInt(l/g),c=l-g*s;var t=a.children(".item:eq("+s+")"),i=a.children(".item:not(:eq("+s+"))"),o=a.find(".item:eq("+s+") .letter").length,v=parseInt(g/o),h=parseInt(c/v);if(h!=f){if(f=h,t.hasClass("active")||(e.Event("itemChange"),e.Event("lastItem"),e.Event("firstItem"),a.trigger({type:"itemChange",targetIndex:s}),0==s&&a.trigger({type:"firstItem"}),s==d-1&&a.trigger({type:"lastItem"})),t.addClass("active"),e.Event("letterChange"),a.trigger({type:"letterChange"}),t.find(".letter:eq("+h+")").addClass("active current"),n.keepActive){for(p=0;p<h;p++)t.find(".letter:eq("+p+")").addClass("active").removeClass("current");for(var p=h+1;p<o;p++)t.find(".letter:eq("+p+")").removeClass("active current")}else t.find(".letter:not(:eq("+h+"))").removeClass("active current");if(i.removeClass("active"),n.navigation){for(var m=0;m<d;m++)m<=s?jQ_stdNavigation.find('a[href="#'+m.toString()+'"]').addClass("active"):jQ_stdNavigation.find('a[href="#'+m.toString()+'"]').removeClass("active");var u=l/(d*g)*g_progressHeight;s+1==d&&(u=g_progressHeight-g_navigationBulletMargin-g_navigationBulletHeight),jQ_stdNavigation.children(".progress").height(u)}if(n.intro&&l>0&&a.children(".intro").removeClass("active"),n.progressBar){var w=l/(d*g)*r;a.children(".progress-bar").css("width",w)}f=h}h==o-1&&(e.Event("itemEnd"),a.trigger({type:"itemEnd",index:s}))}()}),e(window).on("resize",function(e){r=window.innerWidth,o=window.innerHeight,i.height(d*g+window.innerHeight)}),a.on("itemChange",function(e){var t=e.targetIndex;n.onItemChange(t),p=!0}),a.on("firstItem",function(e){n.onFirstItem(e)}),a.on("lastItem",function(e){n.onLastItem(e)}),a.on("letterChange",function(e){n.onLetterChange(e)}),a.on("itemEnd",function(e){if(p){var t=e.index;n.onItemEnd(t);a.children(".item").eq(t);p=!1}}),a.on("scrollEnd",function(e){n.onScrollEnd(e)})}}(jQuery);