!function(e){api={},e.fn.scrollio=function(t){var i={id:"scrollio",scrollRange:2e3,keepActive:!0,textEllipsis:"...",fontSize:6,intro:!1,introTitle:"",introDescription:"",progressBar:!0,overlay:!0,onItemChange:function(e){},onLetterChange:function(e){},onScroll:function(e){},onItemEnd:function(e){},onFirstItem:function(e){},onLastItem:function(e){},onScrollEnd:function(e){}};if("string"==typeof t){var n="";if(0==t.indexOf("get:"))return"defaults"==(n=t.replace("get:",""))?i:"current"==n?api.current:void 0!==i[n]?i[n]:"index"==n?api.index:"relativeScroll"==n?api.relativeScroll:"amountOfItems"==n?api.amountOfItems:"progressBarCoef"==n?api.progressBarCoef:"itemProgressCoef"==n?api.itemProgressCoef:"api"==n?api:(console.log('not a valid "get:" request'),!1);if(0==t.indexOf("do:")){if("goToNextItem"==(n=t.replace("do:",""))){if(api.index<api.amountOfItems-1){o=(api.index+1)*i.scrollRange;e("body,html").animate({scrollTop:o},i.scrollRange)}else console.log("unable to go to next item, this is the last item");return}if("goToPreviousItem"==n){if(api.index>0){o=(api.index-1)*i.scrollRange;e("body,html").animate({scrollTop:o},i.scrollRange)}else console.log("unable to go to previous item, this is the first item");return}if("goToFirstItem"==n)return void e("body,html").animate({scrollTop:0},api.scrollTop);if("goToLastItem"==n){o=(api.amountOfItems-1)*i.scrollRange;return void e("body,html").animate({scrollTop:o},o)}if("goToItemStart"==n){o=api.index*i.scrollRange;return void e("body,html").animate({scrollTop:o},api.relativeScroll)}if("goToItemEnd"==n){var o=api.index*i.scrollRange+i.scrollRange-20;return void e("body,html").animate({scrollTop:o},i.scrollRange)}return console.log('not a valid "do:" request'),!1}return console.log("not a valid API request"),!1}var r=e("#"+i.id);if(r.hasClass("initialized"))console.log("Scrollio already initialized");else{var a=e("body"),s=window.innerWidth,l=window.innerHeight;if(api.current=i,"object"==typeof t){Object.getOwnPropertyNames(t).forEach(function(e){i.hasOwnProperty(e)&&(i[e]=t[e],api.current[e]=t[e])})}i.overlay&&r.append('<div class="overlay"></div>');var c=0;api.index=c;var d=0;api.scrollTop=d;var p=0;api.relativeScroll=p;var f=r.children(".item").length;api.amountOfItems=f;var g=i.scrollRange,m=d/(f*g);api.progressBarCoef=m;var v=m*s,u=0;api.itemProgressCoef=u;var h=0,C=0;a.height(f*g+l);var I=-1,x=!0,y=e('head meta[name="description"]').attr("content"),w=document.title,S=function(t){"string"==typeof t&&r.find(t).each(function(){var t=e(this).children().eq(0),n=t.text(),o="",r=1e3;o+='<span class="word">';for(l=0;l<n.length;l++)" "==n[l]?(o+="</span>",o+='<span class="separator"> </span>',o+='<span class="word">'):o+='<span class="letter" style="z-index:'+r+';">'+n[l]+"</span>",r--;o+="</span>";var a=" ";""!=i.textEllipsis&&(a=i.textEllipsis);for(var s="",l=0;l<a.length;l++)s+='<span class="letter" style="z-index:'+r+';">'+a[l]+"</span>",r--;var c=o+('<span class="word ellipsis">'+s+"</span>");t.html(c)})};S(".item");if(i.keepActive&&r.addClass("keep-active"),"number"==typeof i.fontSize)if(i.fontSize>=1&&i.fontSize<=7){i.fontSize=parseInt(i.fontSize);var E="font-size-"+i.fontSize.toString();r.find(".item>*:first-child").addClass(E)}else console.log("invalid font size: must be a integer from 1 to 7");else console.log("fontSize option must be a number");i.intro?(""!=i.introTitle?w=i.introTitle:void 0!==w&&""!=w&&w!=i.textEllipsis||(w="Scrollio"),""!=i.introDescription?y=i.introDescription:void 0!==y&&""!=y||(y="Scroll down to discover"),r.append('<div class="intro"><header><h1 class="font-size-7">'+w+'</h1><p class="description font-size-2">'+y+"</p></header></div>"),S(".intro header"),setTimeout(function(){-1==I&&r.children(".intro").addClass("active")},16)):r.children(".item").eq(0).addClass("active"),i.progressBar&&r.append('<div class="progress-bar"></div>'),r.addClass("initialized"),e(document).on("scroll",function(t){var n=e(window).scrollTop(),o=!0,a=n-h;a<0&&(o=!1),h=n,C=a,i.onScroll({index:c,relativeScroll:p,isScrollDown:o,progressBarCoef:m,itemProgressCoef:u}),Math.abs(a),function(){d=e(window).scrollTop(),api.scrollTop=d,d>=f*g&&(d=f*g-1,e.Event("scrollEnd"),r.trigger({type:"scrollEnd"}));c=parseInt(d/g),api.index=c,p=d-g*c,api.relativeScroll=p;var t=r.children(".item:eq("+c+")"),n=r.children(".item:not(:eq("+c+"))");u=p/g,api.itemProgressCoef=u;var o=r.find(".item:eq("+c+") .letter").length,a=parseInt(g/o),l=parseInt(p/a);if(l!=I){if(I=l,t.hasClass("active")||(e.Event("itemChange"),e.Event("lastItem"),e.Event("firstItem"),r.trigger({type:"itemChange",targetIndex:c}),0==c&&r.trigger({type:"firstItem"}),c==f-1&&r.trigger({type:"lastItem"})),t.addClass("active"),e.Event("letterChange"),r.trigger({type:"letterChange"}),t.find(".letter:eq("+l+")").addClass("active current"),i.keepActive){for(h=0;h<l;h++)t.find(".letter:eq("+h+")").addClass("active").removeClass("current");for(var h=l+1;h<o;h++)t.find(".letter:eq("+h+")").removeClass("active current")}else t.find(".letter:not(:eq("+l+"))").removeClass("active current");n.removeClass("active"),i.intro&&d>0&&r.children(".intro").removeClass("active"),i.progressBar&&(v=(m=d/(f*g))*s,r.children(".progress-bar").css("width",v),api.progressBarCoef=m),I=l}l==o-1&&(e.Event("itemEnd"),r.trigger({type:"itemEnd",index:c}))}()}),e(window).on("resize",function(e){s=window.innerWidth,l=window.innerHeight,a.height(f*g+window.innerHeight)}),r.on("itemChange",function(e){var t=e.targetIndex;i.onItemChange(t),x=!0}),r.on("firstItem",function(e){i.onFirstItem(e)}),r.on("lastItem",function(e){i.onLastItem(e)}),r.on("letterChange",function(e){i.onLetterChange(e)}),r.on("itemEnd",function(e){if(x){var t=e.index;i.onItemEnd(t);r.children(".item").eq(t);x=!1}}),r.on("scrollEnd",function(e){i.onScrollEnd(e)})}}}(jQuery);